<div class="deposits-scroll-wrapper">
  <div class="deposits-page">
    <div class="banner-container">
      <h2 class="heading-purple">Your Deposits</h2>
    </div>

    <table *ngIf="deposits.length > 0; else noFds">
      <thead>
        <tr>
          <th>Scheme</th>
          <th>Amount</th>
          <th>Interest Earned</th>
          <th>Maturity Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let fd of deposits">
          <td>{{ fd.schemeName || 'N/A' }}</td>
          <td>₹{{ fd.amount }}</td>
          <td>₹{{ fd.interestEarned }}</td>
          <td>{{ fd.maturityDate | date: 'mediumDate' }}</td>
          <td class="action-buttons">
            <button class="btn-view" (click)="openFdModal(fd)">View</button>
            <button class="btn-withdraw" (click)="prepareCloseFd(fd)">Close FD</button>
          </td>
        </tr>
      </tbody>
    </table>

    <ng-template #noFds>
      <div class="banner-container">
        <p class="no-fds-message">No active deposits found.</p>
      </div>
    </ng-template>
  </div>

  <!-- View FD Modal -->
  <div class="modal-backdrop" *ngIf="selectedFd && !showWithdrawModal">
    <div class="modal-box">
      <h2>FD Details</h2>
      <p><strong>User:</strong> {{ selectedFd.userEmail }}</p>
      <p><strong>Scheme:</strong> {{ selectedFd.schemeName || 'N/A' }}</p>
      <p><strong>Start Date:</strong> {{ selectedFd.startDate | date: 'mediumDate' }}</p>
      <p><strong>Maturity Date:</strong> {{ selectedFd.maturityDate | date: 'mediumDate' }}</p>
      <p><strong>Invested Amount:</strong> ₹{{ selectedFd.amount }}</p>
      <p><strong>Interest Earned:</strong> ₹{{ selectedFd.interestEarned }}</p>
      <p><strong>Maturity Amount:</strong> ₹{{ selectedFd.maturityAmount }}</p>
      <p><strong>Payout Type:</strong> {{ selectedFd.payoutType }}</p>

      <div class="modal-actions">
        <button class="cancel-btn" (click)="closeModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Confirm Withdraw Modal -->
  <div class="modal-backdrop" *ngIf="showWithdrawModal && selectedFd">
    <div class="modal-box confirm-box">
      <h3>Confirm FD Closure</h3>
      <p><strong>Scheme Name:</strong> {{ selectedFd.schemeName || 'N/A' }}</p>
      <p><strong>Deposited Amount:</strong> ₹{{ selectedFd.amount }}</p>
      <p><strong>Tenure:</strong> {{ selectedFd.tenureMonths }} months</p>
      <p><strong>Expected Maturity Amount:</strong> ₹{{ selectedFd.maturityAmount }}</p>
      <p><strong>Interest Earned Till Now:</strong> ₹{{ selectedFd.interestEarned }}</p>
      <p><strong>Penalty Amount:</strong> ₹{{ selectedFd.penality || 0 }}</p>
      <p><strong>Final Payout (After Penalty):</strong> 
        <span style="color: green; font-weight: bold;">
          ₹{{ finalPayout }}
        </span>
      </p>

      <div class="modal-actions">
        <button class="btn-confirm" (click)="confirmWithdraw()">Confirm Withdraw</button>
        <button class="cancel-btn" (click)="showWithdrawModal = false">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Benefits Section -->
  <section class="fd-benefits-section">
    <h2 class="fd-benefits-heading">Benefits of Deposits</h2>
    <div class="fd-benefits-wrapper">
      <div class="benefit-column left">
        <div class="benefit-box">
          <i class="fas fa-piggy-bank"></i>
          <div>
            <h4>Encourages Habit of Saving</h4>
            <p>Small savings lead to bigger investments.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-shield-alt"></i>
          <div>
            <h4>Safe Option</h4>
            <p>No market-related risks.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-money-bill-wave"></i>
          <div>
            <h4>Interest Payment Options</h4>
            <p>Cumulative & Non-Cumulative.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-user-plus"></i>
          <div>
            <h4>Higher Interest for Seniors</h4>
            <p>Up to 0.65% extra.</p>
          </div>
        </div>
      </div>

      <div class="benefit-center">
        <div class="central-icon">
          <i class="fas fa-rupee-sign"></i>
        </div>
      </div>

      <div class="benefit-column right">
        <div class="benefit-box">
          <i class="fas fa-hand-holding-usd"></i>
          <div>
            <h4>Loan Against FD</h4>
            <p>Up to 95% of the deposit amount.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-percentage"></i>
          <div>
            <h4>Guaranteed Returns</h4>
            <p>Fixed interest rates.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-university"></i>
          <div>
            <h4>Deposit Insurance</h4>
            <p>In case the bank defaults.</p>
          </div>
        </div>
        <div class="benefit-box">
          <i class="fas fa-receipt"></i>
          <div>
            <h4>80C Tax Deductions</h4>
            <p>Up to ₹1.5 lakh/year.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>